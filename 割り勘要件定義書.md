# Payment Memory Web Service 要件定義書

## 1. 概要

本サービスは、グループ内で「誰が・いつ・何に・いくら支払ったか」を記録・共有することを主目的としたWEBサービスである。
厳密な割り勘計算を目的とせず、支払い履歴の記憶と共有を中心に据えることで、海外文化に適合した金銭管理体験を提供する。

## 2. 目的

-   グループ内の支払い状況を可視化し、後日の精算や心理的負担を軽減する
-   音声入力による高速・直感的な記録体験を実現する
-   多国籍・多言語環境でも破綻しない柔軟な設計とする

## 3. 想定ユーザー

-   海外旅行中の友人グループ
-   ルームシェアをしている居住者
-   食事・イベント費用を立て替える機会の多いユーザー

## 4. 用語定義

  用語         説明
  ------------ --------------------------
  グループ     支払いを共有する単位
  支払い記録   1回の立替・支払いログ
  参加者       支払い対象となるメンバー
  サマリー     支払い状況の概算表示

## 5. 機能要件

### 5.1 ユーザー管理

-   ユーザー登録（メール / OAuth）
-   表示名設定
-   退会処理

### 5.2 グループ管理

-   グループ作成
-   招待リンクによる参加
-   グループ削除

### 5.3 支払い記録機能（コア）

-   支払者の指定
-   金額入力（通貨対応）
-   用途入力（自由記述）
-   対象参加者選択（全員 / 一部）
-   記録日時の自動付与

### 5.4 音声入力機能

-   音声録音
-   音声認識APIによるテキスト化
-   自然言語解析による支払い情報抽出
-   確認・修正画面の提供

### 5.5 サマリー表示

-   個人ごとの支払い傾向表示
-   「多く支払っている」「少なめ」などの定性的表現
-   概算の貸し借り表示（参考値）

## 6. 非機能要件

### 6.1 パフォーマンス

-   音声入力から記録完了まで5秒以内

### 6.2 可用性

-   クラウドインフラ前提
-   SLA 99.5%以上を目標

### 6.3 セキュリティ

-   HTTPS必須
-   認証情報の安全な管理
-   グループ外アクセスの禁止

### 6.4 国際化

-   多通貨対応
-   多言語対応（初期は英語）

## 7. システム構成

### 7.1 全体構成

-   フロントエンド：Web（React想定）
-   バックエンド：APIサーバ
-   DB：RDB（PostgreSQL想定）
-   外部API：音声認識 / LLM

### 7.2 音声処理フロー

1.  クライアントで音声録音
2.  バックエンドへ送信
3.  音声認識APIでテキスト化
4.  LLMで構造化データ抽出
5.  DBへ保存

## 8. データモデル概要

### User

-   id
-   name

### Group

-   id
-   name

### Payment

-   id
-   group_id
-   payer_id
-   amount
-   currency
-   purpose
-   created_at

### PaymentParticipant

-   payment_id
-   user_id
-   weight（将来拡張用）

## 9. 制約事項

-   厳密な精算を保証しない
-   金融機関としての責任を負わない
-   表示金額は参考値であることを明示

## 10. 将来拡張

-   決済アプリ連携（Venmo等）
-   オフライン入力
-   AIによる精算提案
